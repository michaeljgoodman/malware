import flask
from flask import request
from slack_sdk.webhook import WebhookClient
from urllib.parse import unquote

app = flask.Flask(__name__)
app.config["DEBUG"] = True #return errors in browser if code is not working



url = "https://hooks.slack.com/services/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"
webhook = WebhookClient(url)


@app.route('/', methods=['GET'])
def home():
    return "<h1>It's working!</h1>"

@app.route('/slack/tyrone', methods=['POST','GET'])
def message_from_tyrone():
    message = unquote(request.args.get('message'))
    
    response = webhook.send(text=message)
    assert response.status_code == 200
    assert response.body == "ok"
    return("Sent message to slack")


app.run()